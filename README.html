<!DOCTYPE html><html><head>
      <title>README</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
      
      
      
      
      
      
      
      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
 
      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview   ">
      <h1 class="mume-header" id="%ED%8A%B8%EB%A6%AC%ED%94%8C%EC%97%AC%ED%96%89%EC%9E%90-%ED%81%B4%EB%9F%BD-%EB%A7%88%EC%9D%BC%EB%A6%AC%EC%A7%80-%EC%84%9C%EB%B9%84%EC%8A%A4">&#xD2B8;&#xB9AC;&#xD50C;&#xC5EC;&#xD589;&#xC790; &#xD074;&#xB7FD; &#xB9C8;&#xC77C;&#xB9AC;&#xC9C0; &#xC11C;&#xBE44;&#xC2A4;</h1>

<h2 class="mume-header" id="%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4">&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4;</h2>

<p><img src="./database.png" alt="database"></p>
<ul>
<li>MySQL 5.7 &#xAE30;&#xC900;</li>
<li><strong>[&#xCC38;&#xACE0;] &#xD3EC;&#xC778;&#xD2B8;&#xB97C; &#xC81C;&#xC678;&#xD55C; &#xD14C;&#xC774;&#xBE14;&#xC5D0; &#xB300;&#xD574;&#xC11C;&#xB294; &#xCD5C;&#xC18C;&#xD55C;&#xC758; &#xCEEC;&#xB7FC;&#xC73C;&#xB85C; &#xC124;&#xACC4; &#xC9C4;&#xD589;</strong></li>
<li>&#xD3EC;&#xC778;&#xD2B8; &#xC99D;&#xAC10;&#xC5D0; &#xB300;&#xD55C; &#xC774;&#xB825; &#xAD00;&#xB9AC;(<code>points</code>)
<ul>
<li>&#xC9C0;&#xAE09;/&#xCC28;&#xAC10;/&#xC0AC;&#xC6A9;/&#xB9CC;&#xB8CC;&#xC5D0; &#xB300;&#xD55C; &#xBAA8;&#xB4E0; &#xC774;&#xB825;&#xC744; &#xBCF4;&#xAD00;</li>
<li>&#xCC28;&#xAC10;/&#xC0AC;&#xC6A9;/&#xB9CC;&#xB8CC;&#xC758; &#xACBD;&#xC6B0; &#xC74C;&#xC218; &#xAC12; &#xC0AC;&#xC6A9;</li>
</ul>
</li>
<li>&#xB9AC;&#xBDF0;&#xB85C; &#xC778;&#xD55C; &#xD3EC;&#xC778;&#xD2B8; &#xBC1C;&#xC0DD; &#xC774;&#xB825;&#xB3C4; &#xCD94;&#xC801;&#xC774; &#xAC00;&#xB2A5;&#xD574;&#xC57C; &#xD558;&#xBBC0;&#xB85C;, &#xBCC4;&#xB3C4;&#xC758; &#xD14C;&#xC774;&#xBE14;(<code>review_points</code>)&#xB85C; &#xC774;&#xB97C; &#xCD94;&#xC801;</li>
<li>&#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC815;&#xCC45; &#xAD00;&#xB9AC;(<code>point_policies</code>)
<ul>
<li>&#xC815;&#xCC45; &#xC720;&#xD6A8;&#xAE30;&#xAC04;(&#xC2DC;&#xC791;&#xC77C;&#xC790;, &#xC885;&#xB8CC;&#xC77C;&#xC790;)&#xB97C; &#xD1B5;&#xD558;&#xC5EC; &#xCD94;&#xD6C4; &#xC815;&#xCC45; &#xBCC0;&#xACBD; &#xBC0F; &#xCD94;&#xAC00;&#xC5D0; &#xB300;&#xC751;</li>
<li>&#xC0AC;&#xC6A9; &#xC720;&#xBB34; &#xCEEC;&#xB7FC;&#xC744; &#xBCC4;&#xB3C4;&#xB85C; &#xC9C0;&#xC815;&#xD558;&#xC5EC; &#xC77C;&#xC2DC;&#xC801;&#xC73C;&#xB85C; &#xC9C0;&#xAE09;&#xC744; &#xB9C9;&#xC744; &#xC218; &#xC788;&#xB294; &#xAC00;&#xB2A5;&#xC131;&#xB3C4; &#xACE0;&#xB824;</li>
</ul>
</li>
<li><a href="./schema.sql">&#xC2A4;&#xBBF8;&#xCE74;_&#xB9C1;&#xD06C;</a></li>
</ul>
<h2 class="mume-header" id="%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%A0%81%EB%A6%BD-api-sequence">&#xD3EC;&#xC778;&#xD2B8; &#xC801;&#xB9BD; API Sequence</h2>

<ul>
<li>&#xD3EC;&#xC778;&#xD2B8; &#xC801;&#xB9BD; API &#xD638;&#xCD9C;&#xC5D0;&#xC11C; &#xBC1C;&#xC0DD;&#xD558;&#xB294; &#xD750;&#xB984;&#xC5D0; &#xB300;&#xD558;&#xC5EC; &#xAE30;&#xC220;
<ul>
<li>&#xB9AC;&#xBDF0; &#xC791;&#xC131;/&#xC218;&#xC815;/&#xC0AD;&#xC81C;&#xC5D0; &#xB530;&#xB978; Flow &#xBD84;&#xAE30;</li>
<li>&#xD3EC;&#xC778;&#xD2B8;&#xC5D0; &#xB300;&#xD55C; &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; Insert(&#xD3EC;&#xC778;&#xD2B8; &#xC801;&#xB9BD;/&#xC218;&#xC815;/&#xC0AD;&#xC81C;)</li>
<li>&#xB9AC;&#xBDF0;&#xB85C; &#xC9C0;&#xAE09; &#xBC1B;&#xC740; &#xD3EC;&#xC778;&#xD2B8; &#xB300;&#xD55C; &#xC774;&#xB825; &#xCD94;&#xC801;&#xC744; &#xC704;&#xD55C; &#xD788;&#xC2A4;&#xD1A0;&#xB9AC; &#xC131;&#xACA9;&#xC758; &#xB370;&#xC774;&#xD130; Insert</li>
</ul>
</li>
<li>&#xCC98;&#xB9AC; &#xC2DC; &#xBC1C;&#xC0DD;&#xD558;&#xB294; &#xC608;&#xC678; &#xCF00;&#xC774;&#xC2A4;&#xC5D0; &#xB300;&#xD574;&#xC11C;&#xB294; HTTP STATUS 4XX/5XX&#xB97C; &#xBC18;&#xD658;</li>
</ul>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="3896px" preserveAspectRatio="none" style="width:2446px;height:3896px;" version="1.1" viewBox="0 0 2446 3896" width="2446px" zoomAndPan="magnify"><defs><filter height="300%" id="f1oqf1f4lyepvk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="3881.3613" style="stroke: #A80036; stroke-width: 1.0;" width="290.5" x="14" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="117.75" y="16.5684">SERVICE_API</text><rect fill="#DDDDDD" height="3881.3613" style="stroke: #A80036; stroke-width: 1.0;" width="2039.5" x="384" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="1367.25" y="16.5684">EVENT_API</text><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="3492.2109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="465.5" y="297.6621"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="142.1973" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="869.5" y="399.9043"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="922.3789" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1018.5" y="606.7227"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="997.5762" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1018.5" y="1717.9648"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="877.4688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1018.5" y="2845.7832"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="790.5" x="162.5" y="444.2148"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="790.5" x="162.5" y="490.8359"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="681.6543"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="941.5" x="162.5" y="728.2754"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="831.1621"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="941.5" x="162.5" y="877.7832"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="441" x="943" y="936.0488"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="146.4629" style="stroke: #000000; stroke-width: 2.0;" width="883.5" x="933" y="1009.6699"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="330" x="943" y="1089.5117"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="150.8633" style="stroke: #000000; stroke-width: 2.0;" width="715.5" x="933" y="1170.1328"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="368" x="943" y="1254.375"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="1777.5859"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="941.5" x="162.5" y="1824.207"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="1987.0254"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="941.5" x="162.5" y="2033.6465"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="296.9707" style="stroke: #000000; stroke-width: 2.0;" width="903.5" x="923" y="2151.8438"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="265.6602" style="stroke: #000000; stroke-width: 2.0;" width="883.5" x="933" y="2176.1543"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="290.5" x="943" y="2255.9961"/><rect fill="#FFFFFF" height="103.8867" style="stroke: none; stroke-width: 1.0;" width="883.5" x="933" y="2337.9277"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="290.5" x="943" y="2359.8828"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="2905.4043"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="941.5" x="162.5" y="2952.0254"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="3054.9121"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="941.5" x="162.5" y="3101.5332"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="390" x="943" y="3277.3516"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="438" x="943" y="3366.2832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="36" x2="36" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="236.5" x2="236.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="470" x2="470" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="874" x2="874" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1023" x2="1023" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1285.5" x2="1285.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1575.5" x2="1575.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1727.5" x2="1727.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1873.5" x2="1873.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2020.5" x2="2020.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2183.5" x2="2183.5" y1="106.7988" y2="3798.873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2342.5" x2="2342.5" y1="106.7988" y2="3798.873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="18" y="103.8457">User</text><ellipse cx="36.5" cy="33.3105" fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M36.5,41.3105 L36.5,68.3105 M23.5,49.3105 L49.5,49.3105 M36.5,68.3105 L23.5,83.3105 M36.5,68.3105 L49.5,83.3105 " fill="none" filter="url(#f1oqf1f4lyepvk)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="18" y="3811.4082">User</text><ellipse cx="36.5" cy="3824.3613" fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M36.5,3832.3613 L36.5,3859.3613 M23.5,3840.3613 L49.5,3840.3613 M36.5,3859.3613 L23.5,3874.3613 M36.5,3859.3613 L49.5,3874.3613 " fill="none" filter="url(#f1oqf1f4lyepvk)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="192.5" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="199.5" y="91.8457">ServiceAPI</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="192.5" y="3797.873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="199.5" y="3818.4082">ServiceAPI</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="408" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="415" y="91.8457">EventController</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="408" y="3797.873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="415" y="3818.4082">EventController</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="826" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="833" y="91.8457">UserService</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="826" y="3797.873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="833" y="3818.4082">UserService</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="973" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="980" y="91.8457">PointService</text><rect fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="973" y="3797.873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="980" y="3818.4082">PointService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1230.5" y="103.8457">UserRepository</text><path d="M1267.5,54.3105 C1267.5,44.3105 1285.5,44.3105 1285.5,44.3105 C1285.5,44.3105 1303.5,44.3105 1303.5,54.3105 L1303.5,80.3105 C1303.5,90.3105 1285.5,90.3105 1285.5,90.3105 C1285.5,90.3105 1267.5,90.3105 1267.5,80.3105 L1267.5,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1267.5,54.3105 C1267.5,64.3105 1285.5,64.3105 1285.5,64.3105 C1285.5,64.3105 1303.5,64.3105 1303.5,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1230.5" y="3811.4082">UserRepository</text><path d="M1267.5,3824.3613 C1267.5,3814.3613 1285.5,3814.3613 1285.5,3814.3613 C1285.5,3814.3613 1303.5,3814.3613 1303.5,3824.3613 L1303.5,3850.3613 C1303.5,3860.3613 1285.5,3860.3613 1285.5,3860.3613 C1285.5,3860.3613 1267.5,3860.3613 1267.5,3850.3613 L1267.5,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1267.5,3824.3613 C1267.5,3834.3613 1285.5,3834.3613 1285.5,3834.3613 C1285.5,3834.3613 1303.5,3834.3613 1303.5,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="1512.5" y="103.8457">ReviewRepository</text><path d="M1557.5,54.3105 C1557.5,44.3105 1575.5,44.3105 1575.5,44.3105 C1575.5,44.3105 1593.5,44.3105 1593.5,54.3105 L1593.5,80.3105 C1593.5,90.3105 1575.5,90.3105 1575.5,90.3105 C1575.5,90.3105 1557.5,90.3105 1557.5,80.3105 L1557.5,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1557.5,54.3105 C1557.5,64.3105 1575.5,64.3105 1575.5,64.3105 C1575.5,64.3105 1593.5,64.3105 1593.5,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="1512.5" y="3811.4082">ReviewRepository</text><path d="M1557.5,3824.3613 C1557.5,3814.3613 1575.5,3814.3613 1575.5,3814.3613 C1575.5,3814.3613 1593.5,3814.3613 1593.5,3824.3613 L1593.5,3850.3613 C1593.5,3860.3613 1575.5,3860.3613 1575.5,3860.3613 C1575.5,3860.3613 1557.5,3860.3613 1557.5,3850.3613 L1557.5,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1557.5,3824.3613 C1557.5,3834.3613 1575.5,3834.3613 1575.5,3834.3613 C1575.5,3834.3613 1593.5,3834.3613 1593.5,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="1648.5" y="103.8457">AttachmentRepository</text><path d="M1709.5,54.3105 C1709.5,44.3105 1727.5,44.3105 1727.5,44.3105 C1727.5,44.3105 1745.5,44.3105 1745.5,54.3105 L1745.5,80.3105 C1745.5,90.3105 1727.5,90.3105 1727.5,90.3105 C1727.5,90.3105 1709.5,90.3105 1709.5,80.3105 L1709.5,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1709.5,54.3105 C1709.5,64.3105 1727.5,64.3105 1727.5,64.3105 C1727.5,64.3105 1745.5,64.3105 1745.5,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="1648.5" y="3811.4082">AttachmentRepository</text><path d="M1709.5,3824.3613 C1709.5,3814.3613 1727.5,3814.3613 1727.5,3814.3613 C1727.5,3814.3613 1745.5,3814.3613 1745.5,3824.3613 L1745.5,3850.3613 C1745.5,3860.3613 1727.5,3860.3613 1727.5,3860.3613 C1727.5,3860.3613 1709.5,3860.3613 1709.5,3850.3613 L1709.5,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1709.5,3824.3613 C1709.5,3834.3613 1727.5,3834.3613 1727.5,3834.3613 C1727.5,3834.3613 1745.5,3834.3613 1745.5,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1816.5" y="103.8457">PointRepository</text><path d="M1855.5,54.3105 C1855.5,44.3105 1873.5,44.3105 1873.5,44.3105 C1873.5,44.3105 1891.5,44.3105 1891.5,54.3105 L1891.5,80.3105 C1891.5,90.3105 1873.5,90.3105 1873.5,90.3105 C1873.5,90.3105 1855.5,90.3105 1855.5,80.3105 L1855.5,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1855.5,54.3105 C1855.5,64.3105 1873.5,64.3105 1873.5,64.3105 C1873.5,64.3105 1891.5,64.3105 1891.5,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1816.5" y="3811.4082">PointRepository</text><path d="M1855.5,3824.3613 C1855.5,3814.3613 1873.5,3814.3613 1873.5,3814.3613 C1873.5,3814.3613 1891.5,3814.3613 1891.5,3824.3613 L1891.5,3850.3613 C1891.5,3860.3613 1873.5,3860.3613 1873.5,3860.3613 C1873.5,3860.3613 1855.5,3860.3613 1855.5,3850.3613 L1855.5,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1855.5,3824.3613 C1855.5,3834.3613 1873.5,3834.3613 1873.5,3834.3613 C1873.5,3834.3613 1891.5,3834.3613 1891.5,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="1940.5" y="103.8457">ReviewPointRepository</text><path d="M2003,54.3105 C2003,44.3105 2021,44.3105 2021,44.3105 C2021,44.3105 2039,44.3105 2039,54.3105 L2039,80.3105 C2039,90.3105 2021,90.3105 2021,90.3105 C2021,90.3105 2003,90.3105 2003,80.3105 L2003,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2003,54.3105 C2003,64.3105 2021,64.3105 2021,64.3105 C2021,64.3105 2039,64.3105 2039,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="1940.5" y="3811.4082">ReviewPointRepository</text><path d="M2003,3824.3613 C2003,3814.3613 2021,3814.3613 2021,3814.3613 C2021,3814.3613 2039,3814.3613 2039,3824.3613 L2039,3850.3613 C2039,3860.3613 2021,3860.3613 2021,3860.3613 C2021,3860.3613 2003,3860.3613 2003,3850.3613 L2003,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2003,3824.3613 C2003,3834.3613 2021,3834.3613 2021,3834.3613 C2021,3834.3613 2039,3834.3613 2039,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="2111.5" y="103.8457">UserPointRepository</text><path d="M2166,54.3105 C2166,44.3105 2184,44.3105 2184,44.3105 C2184,44.3105 2202,44.3105 2202,54.3105 L2202,80.3105 C2202,90.3105 2184,90.3105 2184,90.3105 C2184,90.3105 2166,90.3105 2166,80.3105 L2166,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2166,54.3105 C2166,64.3105 2184,64.3105 2184,64.3105 C2184,64.3105 2202,64.3105 2202,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="2111.5" y="3811.4082">UserPointRepository</text><path d="M2166,3824.3613 C2166,3814.3613 2184,3814.3613 2184,3814.3613 C2184,3814.3613 2202,3814.3613 2202,3824.3613 L2202,3850.3613 C2202,3860.3613 2184,3860.3613 2184,3860.3613 C2184,3860.3613 2166,3860.3613 2166,3850.3613 L2166,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2166,3824.3613 C2166,3834.3613 2184,3834.3613 2184,3834.3613 C2184,3834.3613 2202,3834.3613 2202,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="2266.5" y="103.8457">PointPolicyRepository</text><path d="M2325,54.3105 C2325,44.3105 2343,44.3105 2343,44.3105 C2343,44.3105 2361,44.3105 2361,54.3105 L2361,80.3105 C2361,90.3105 2343,90.3105 2343,90.3105 C2343,90.3105 2325,90.3105 2325,80.3105 L2325,54.3105 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2325,54.3105 C2325,64.3105 2343,64.3105 2343,64.3105 C2343,64.3105 2361,64.3105 2361,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="2266.5" y="3811.4082">PointPolicyRepository</text><path d="M2325,3824.3613 C2325,3814.3613 2343,3814.3613 2343,3814.3613 C2343,3814.3613 2361,3814.3613 2361,3824.3613 L2361,3850.3613 C2361,3860.3613 2343,3860.3613 2343,3860.3613 C2343,3860.3613 2325,3860.3613 2325,3850.3613 L2325,3824.3613 " fill="#FEFECE" filter="url(#f1oqf1f4lyepvk)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2325,3824.3613 C2325,3834.3613 2343,3834.3613 2343,3834.3613 C2343,3834.3613 2361,3834.3613 2361,3824.3613 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="3492.2109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="465.5" y="297.6621"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="142.1973" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="869.5" y="399.9043"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="922.3789" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1018.5" y="606.7227"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="997.5762" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1018.5" y="1717.9648"/><rect fill="#FFFFFF" filter="url(#f1oqf1f4lyepvk)" height="877.4688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1018.5" y="2845.7832"/><polygon fill="#A80036" points="224.5,134.1094,234.5,138.1094,224.5,142.1094,228.5,138.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="230.5" y1="138.1094" y2="138.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="43.5" y="133.3672">HTTP/1.1 POST /v1/reviews</text><polygon fill="#A80036" points="47.5,163.4199,37.5,167.4199,47.5,171.4199,43.5,167.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="235.5" y1="167.4199" y2="167.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="53.5" y="162.6777">HTTP/1.1 200 OK</text><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2431.5" x="3" y="196.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="196.0752" y2="196.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="199.0752" y2="199.0752"/><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="245" x="1096.25" y="185.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="1102.25" y="201.9883">&#xD3EC;&#xC778;&#xD2B8; &#xC801;&#xB9BD;(&#xB9AC;&#xBDF0; &#xC791;&#xC131;/&#xC218;&#xC815;/&#xC0AD;&#xC81C; &#xACF5;&#xD1B5; &#xB85C;&#xC9C1;)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="236.5" x2="278.5" y1="255.3516" y2="255.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="278.5" x2="278.5" y1="255.3516" y2="268.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237.5" x2="278.5" y1="268.3516" y2="268.3516"/><polygon fill="#A80036" points="247.5,264.3516,237.5,268.3516,247.5,272.3516,243.5,268.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="243.5" y="235.2988">&#xB9AC;&#xBDF0; &#xC791;&#xC131;/&#xC218;&#xC815;/&#xC0AD;&#xC81C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="243.5" y="250.6094">&#xC751;&#xB2F5; &#xC774;&#xD6C4;&#xC5D0; &#xC774;&#xBCA4;&#xD2B8; &#xCC98;&#xB9AC;</text><polygon fill="#A80036" points="453.5,293.6621,463.5,297.6621,453.5,301.6621,457.5,297.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="236.5" x2="459.5" y1="297.6621" y2="297.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="243.5" y="292.9199">HTTP/1.1 POST /v1/events</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="475.5" x2="517.5" y1="342.2832" y2="342.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517.5" x2="517.5" y1="342.2832" y2="355.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="476.5" x2="517.5" y1="355.2832" y2="355.2832"/><polygon fill="#A80036" points="486.5,351.2832,476.5,355.2832,486.5,359.2832,482.5,355.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="482.5" y="322.2305">Validate RequestBody</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="486.5" y="337.541">- &#xC694;&#xCCAD; &#xBCF8;&#xBB38;&#xC758; &#xB370;&#xC774;&#xD130; &#xD0C0;&#xC785; &#xBC0F; &#xD544;&#xC218; &#xAC12; &#xCCB4;&#xD06C;</text><polygon fill="#A80036" points="857.5,395.9043,867.5,399.9043,857.5,403.9043,861.5,399.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475.5" x2="863.5" y1="399.9043" y2="399.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="482.5" y="379.8516">validateUser(id: UUID)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="371" x="486.5" y="395.1621">- &#xBCC4;&#xB3C4; &#xC778;&#xC99D; Flow&#xAC00; &#xC874;&#xC7AC; &#xD560; &#xACBD;&#xC6B0; &#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4;&#xB97C; &#xC870;&#xD68C;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xC218; &#xC788;&#xC74C;.</text><polygon fill="#A80036" points="1273.5,425.2148,1283.5,429.2148,1273.5,433.2148,1277.5,429.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="879.5" x2="1279.5" y1="429.2148" y2="429.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="886.5" y="424.4727">userRepository.countById(id: UUID): Long</text><path d="M162.5,444.2148 L224.5,444.2148 L224.5,451.2148 L214.5,461.2148 L162.5,461.2148 L162.5,444.2148 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="790.5" x="162.5" y="444.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="457.7832">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="239.5" y="456.8496">[&#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC740; &#xC720;&#xC800;&#xC77C; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,478.8359,237.5,482.8359,247.5,486.8359,243.5,482.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="868.5" y1="482.8359" y2="482.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="253.5" y="478.0938">HTTP/1.1 400 BadRequest</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="953" y1="491.8359" y2="491.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="502.4707">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,523.1016,237.5,527.1016,247.5,531.1016,243.5,527.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="868.5" y1="527.1016" y2="527.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="522.3594">HTTP/1.1 500 ServiceUnavailable</text><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2431.5" x="3" y="562.7568"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="562.7568" y2="562.7568"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="565.7568" y2="565.7568"/><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="166" x="1135.75" y="552.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="1141.75" y="568.6699">&#xB9AC;&#xBDF0; &#xC791;&#xC131;&#xC5D0; &#xB530;&#xB978; &#xD3EC;&#xC778;&#xD2B8; &#xC801;&#xB9BD;</text><polygon fill="#A80036" points="1006.5,602.7227,1016.5,606.7227,1006.5,610.7227,1010.5,606.7227" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475.5" x2="1012.5" y1="606.7227" y2="606.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="482.5" y="601.9805">processPoints()</text><polygon fill="#A80036" points="1039.5,662.6543,1029.5,666.6543,1039.5,670.6543,1035.5,666.6543" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2331,662.6543,2341,666.6543,2331,670.6543,2335,666.6543" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2337" y1="666.6543" y2="666.6543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1045.5" y="631.291">&#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC815;&#xCC45; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="513" x="1049.5" y="646.6016">- reviewPolicyRepository.findByType(type: ReviewPolicyType): List&lt;ReviewPolicy&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="1049.5" y="661.9121">- &#xC815;&#xCC45; &#xD14C;&#xC774;&#xBE14;&#xC5D0; &#xC874;&#xC7AC;&#xD558;&#xB294; &#xC9C0;&#xAE09; &#xAE08;&#xC561;&#xC744; &#xAE30;&#xC900;&#xC73C;&#xB85C; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC9C4;&#xD589;</text><path d="M162.5,681.6543 L224.5,681.6543 L224.5,688.6543 L214.5,698.6543 L162.5,698.6543 L162.5,681.6543 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="681.6543"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="695.2227">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="239.5" y="694.2891">[&#xC9C0;&#xAE09; &#xC815;&#xCC45; &#xB370;&#xC774;&#xD130;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,716.2754,237.5,720.2754,247.5,724.2754,243.5,720.2754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="720.2754" y2="720.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="253.5" y="715.5332">HTTP/1.1 400 BadRequest</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="1104" y1="729.2754" y2="729.2754"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="739.9102">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,760.541,237.5,764.541,247.5,768.541,243.5,764.541" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="764.541" y2="764.541"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="759.7988">HTTP/1.1 500 ServiceUnavailable</text><polygon fill="#A80036" points="1039.5,812.1621,1029.5,816.1621,1039.5,820.1621,1035.5,816.1621" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1563.5,812.1621,1573.5,816.1621,1563.5,820.1621,1567.5,816.1621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1569.5" y1="816.1621" y2="816.1621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1045.5" y="796.1094">&#xC7A5;&#xC18C;&#xBCC4; &#xD68C;&#xC6D0; &#xB9AC;&#xBDF0; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="505" x="1049.5" y="811.4199">- reviewRepository.countByPlaceIdAndUserId(placeId: UUID, userId: UUID) : Long</text><path d="M162.5,831.1621 L224.5,831.1621 L224.5,838.1621 L214.5,848.1621 L162.5,848.1621 L162.5,831.1621 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="831.1621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="844.7305">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="239.5" y="843.7969">[&#xB370;&#xC774;&#xD130;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,865.7832,237.5,869.7832,247.5,873.7832,243.5,869.7832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="869.7832" y2="869.7832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="253.5" y="865.041">HTTP/1.1 404 Not Found</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="1104" y1="878.7832" y2="878.7832"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="889.418">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,910.0488,237.5,914.0488,247.5,918.0488,243.5,914.0488" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="914.0488" y2="914.0488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="909.3066">HTTP/1.1 500 ServiceUnavailable</text><path d="M943,936.0488 L1005,936.0488 L1005,943.0488 L995,953.0488 L943,953.0488 L943,936.0488 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="441" x="943" y="936.0488"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="949.6172">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="359" x="1020" y="948.6836">[&#xB9AC;&#xBDF0; &#xC5D4;&#xD2F0;&#xD2F0;&#xC758; content &#xAC12;&#xC774; &#xC874;&#xC7AC; &amp;&amp; &#xAE00;&#xC5D0; &#xB300;&#xD55C; &#xB9AC;&#xBDF0; &#xC815;&#xCC45;&#xC774; &#xC874;&#xC7AC;&#xD558;&#xB294; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="974.6699" y2="974.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="974.6699" y2="987.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="987.6699" y2="987.6699"/><polygon fill="#A80036" points="1039.5,983.6699,1029.5,987.6699,1039.5,991.6699,1035.5,987.6699" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="969.9277">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><path d="M933,1009.6699 L995,1009.6699 L995,1016.6699 L985,1026.6699 L933,1026.6699 L933,1009.6699 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="146.4629" style="stroke: #000000; stroke-width: 2.0;" width="883.5" x="933" y="1009.6699"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="948" y="1023.2383">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="512" x="1010" y="1022.3047">[&#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; &#xC2DC; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC815;&#xCC45;&#xC774; &#xC788;&#xC744; &#xACBD;&#xC6B0; &amp;&amp; &#xC694;&#xCCAD; &#xBCF8;&#xBB38;&#xC5D0; &#xCCA8;&#xBD80; &#xC774;&#xBBF8;&#xC9C0;(`attachedPhotos`)&#xAC00; &#xC788;&#xC744; &#xACBD;&#xC6B0;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="572" x="1010" y="1035.2598">&amp;&amp; &#xC694;&#xCCAD; &#xBCF8;&#xBB38;&#xC758; &#xC774;&#xBBF8;&#xC9C0; ID(`attachedPhotos`)&#xB4E4;&#xACFC; &#xC870;&#xD68C;&#xD55C; &#xC5D4;&#xD2F0;&#xD2F0;&#xC758; &#xC774;&#xBBF8;&#xC9C0; ID(`attachedPhotos`)&#xAC00; &#xB3D9;&#xC77C; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="1039.5,1070.5117,1029.5,1074.5117,1039.5,1078.5117,1035.5,1074.5117" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1715.5,1070.5117,1725.5,1074.5117,1715.5,1078.5117,1719.5,1074.5117" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1721.5" y1="1074.5117" y2="1074.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1045.5" y="1054.459">&#xCCA8;&#xBD80; &#xC774;&#xBBF8;&#xC9C0; &#xC874;&#xC7AC; &#xC720;&#xBB34; &#xCCB4;&#xD06C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="1049.5" y="1069.7695">- attachmentRepository.countByIds(ids: List&lt;UUID&gt;) : Long</text><path d="M943,1089.5117 L1005,1089.5117 L1005,1096.5117 L995,1106.5117 L943,1106.5117 L943,1089.5117 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="330" x="943" y="1089.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="1103.0801">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="1020" y="1102.1465">[&#xCCA8;&#xBD80; &#xC774;&#xBBF8;&#xC9C0;&#xAC00; &#xC815;&#xC0C1;&#xC801;&#xC73C;&#xB85C; DB&#xC5D0; &#xC800;&#xC815;&#xB418;&#xC5B4; &#xC788;&#xC744; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="1128.1328" y2="1128.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="1128.1328" y2="1141.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="1141.1328" y2="1141.1328"/><polygon fill="#A80036" points="1039.5,1137.1328,1029.5,1141.1328,1039.5,1145.1328,1035.5,1141.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="1123.3906">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><path d="M933,1170.1328 L995,1170.1328 L995,1177.1328 L985,1187.1328 L933,1187.1328 L933,1170.1328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="150.8633" style="stroke: #000000; stroke-width: 2.0;" width="715.5" x="933" y="1170.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="948" y="1183.7012">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="1010" y="1182.7676">[&#xC7A5;&#xC18C;&#xBCC4; &#xCD5C;&#xCD08; &#xC9C0;&#xAE09; &#xC815;&#xCC45;&#xC774; &#xC874;&#xC7AC;&#xD558;&#xB294; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="1039.5,1235.375,1029.5,1239.375,1039.5,1243.375,1035.5,1239.375" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1563.5,1235.375,1573.5,1239.375,1563.5,1243.375,1567.5,1239.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1569.5" y1="1239.375" y2="1239.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1045.5" y="1204.0117">&#xC7A5;&#xC18C;&#xBCC4; &#xCD5C;&#xCD08; &#xC791;&#xC131; &#xC720;&#xBB34; &#xCCB4;&#xD06C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="345" x="1049.5" y="1219.3223">- reviewRepository.findTopOne(placeId: UUID) : Review</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="397" x="1049.5" y="1234.6328">- placeId&#xB97C; &#xAE30;&#xC900;, &#xB9AC;&#xBDF0; &#xC791;&#xC131;&#xC77C; &#xC5ED;&#xC21C; &#xC815;&#xB82C;&#xB85C; &#xD14C;&#xC774;&#xBE14;&#xC758; Top 1&#xC758; &#xC5D4;&#xD2F0;&#xD2F0;&#xB97C; &#xC870;&#xD68C;</text><path d="M943,1254.375 L1005,1254.375 L1005,1261.375 L995,1271.375 L943,1271.375 L943,1254.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="368" x="943" y="1254.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="1267.9434">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="286" x="1020" y="1267.0098">[&#xC870;&#xD68C;&#xD55C; &#xC5D4;&#xD2F0;&#xD2F0;&#xC758; userId&#xC640; &#xC694;&#xCCAD; &#xBCF8;&#xBB38;&#xC758; userId&#xAC00; &#xAC19;&#xC744; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="1292.9961" y2="1292.9961"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="1292.9961" y2="1305.9961"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="1305.9961" y2="1305.9961"/><polygon fill="#A80036" points="1039.5,1301.9961,1029.5,1305.9961,1039.5,1309.9961,1035.5,1305.9961" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="1288.2539">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><polygon fill="#A80036" points="1039.5,1360.6172,1029.5,1364.6172,1039.5,1368.6172,1035.5,1364.6172" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1861.5,1360.6172,1871.5,1364.6172,1861.5,1368.6172,1865.5,1364.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1867.5" y1="1364.6172" y2="1364.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1045.5" y="1344.5645">Point &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; save</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1049.5" y="1359.875">-pointRepository.saveAll(points: List&lt;Point&gt;)</text><polygon fill="#A80036" points="1039.5,1435.8594,1029.5,1439.8594,1039.5,1443.8594,1035.5,1439.8594" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2009,1435.8594,2019,1439.8594,2009,1443.8594,2013,1439.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2015" y1="1439.8594" y2="1439.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1045.5" y="1389.1855">&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; Insert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="1049.5" y="1404.4961">- reviewPointRepository.insert(ReviewPoint)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="1049.5" y="1419.8066">- &#xB9AC;&#xBDF0; &#xC791;&#xC131;&#xC5D0; &#xB530;&#xB978; &#xAD6C;&#xCCB4;&#xC801;&#xC778; &#xC9C0;&#xAE09; &#xB0B4;&#xC5ED;&#xC744; &#xCEEC;&#xB7FC;&#xC5D0; JSON Serialize &#xD55C; &#xD6C4; &#xBC18;&#xC601;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="382" x="1049.5" y="1435.1172">- serialize&#xD558;&#xB294; &#xB370;&#xC774;&#xD130;&#xC5D0; point&#xB97C; &#xCC38;&#xC870; &#xD560; &#xC218; &#xC788;&#xB294; ID &#xB370;&#xC774;&#xD130;&#xB97C; &#xD3EC;&#xD568;&#xD55C;&#xB2E4;.</text><polygon fill="#A80036" points="1039.5,1480.4805,1029.5,1484.4805,1039.5,1488.4805,1035.5,1484.4805" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1861.5,1480.4805,1871.5,1484.4805,1861.5,1488.4805,1865.5,1484.4805" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1867.5" y1="1484.4805" y2="1484.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="1045.5" y="1464.4277">Point &#xC9D1;&#xACC4; &#xB370;&#xC774;&#xD130; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="1049.5" y="1479.7383">- pointRepository.getAmountSumByUserId(userId: UUID): Long</text><polygon fill="#A80036" points="1034.5,1525.1016,1024.5,1529.1016,1034.5,1533.1016,1030.5,1529.1016" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2172,1525.1016,2182,1529.1016,2172,1533.1016,2176,1529.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="2178" y1="1529.1016" y2="1529.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1040.5" y="1509.0488">&#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xC5C5;&#xB370;&#xC774;&#xD2B8;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="1044.5" y="1524.3594">- userPointRepository.save(entity: UserPoint): UserPoint</text><polygon fill="#A80036" points="486.5,1554.4121,476.5,1558.4121,486.5,1562.4121,482.5,1558.4121" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="480.5" x2="1022.5" y1="1558.4121" y2="1558.4121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="492.5" y="1553.6699">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xBC18;&#xD658;</text><polygon fill="#A80036" points="247.5,1583.7227,237.5,1587.7227,247.5,1591.7227,243.5,1587.7227" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="464.5" y1="1587.7227" y2="1587.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="253.5" y="1582.9805">HTTP/1.1 200 OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="236.5" x2="278.5" y1="1632.3438" y2="1632.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="278.5" x2="278.5" y1="1632.3438" y2="1645.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237.5" x2="278.5" y1="1645.3438" y2="1645.3438"/><polygon fill="#A80036" points="247.5,1641.3438,237.5,1645.3438,247.5,1649.3438,243.5,1645.3438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="243.5" y="1612.291">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xCE90;&#xC2DC; &#xCC98;&#xB9AC;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="247.5" y="1627.6016">- setUserPointCache(userId: UUID)</text><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2431.5" x="3" y="1673.999"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="1673.999" y2="1673.999"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="1676.999" y2="1676.999"/><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="166" x="1135.75" y="1663.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="1141.75" y="1679.9121">&#xB9AC;&#xBDF0; &#xC218;&#xC815;&#xC5D0; &#xB530;&#xB978; &#xD3EC;&#xC778;&#xD2B8; &#xBCC0;&#xACBD;</text><polygon fill="#A80036" points="1006.5,1713.9648,1016.5,1717.9648,1006.5,1721.9648,1010.5,1717.9648" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475.5" x2="1012.5" y1="1717.9648" y2="1717.9648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="482.5" y="1713.2227">processPoints()</text><polygon fill="#A80036" points="1039.5,1758.5859,1029.5,1762.5859,1039.5,1766.5859,1035.5,1762.5859" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1563.5,1758.5859,1573.5,1762.5859,1563.5,1766.5859,1567.5,1762.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1569.5" y1="1762.5859" y2="1762.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1045.5" y="1742.5332">&#xC7A5;&#xC18C;&#xBCC4; &#xD68C;&#xC6D0; &#xB9AC;&#xBDF0; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="519" x="1049.5" y="1757.8438">- reviewRepository.findOneByPlaceIdAndUserId(placeId: UUID, userId: UUID) : Long</text><path d="M162.5,1777.5859 L224.5,1777.5859 L224.5,1784.5859 L214.5,1794.5859 L162.5,1794.5859 L162.5,1777.5859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="1777.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="1791.1543">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="239.5" y="1790.2207">[&#xB370;&#xC774;&#xD130;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,1812.207,237.5,1816.207,247.5,1820.207,243.5,1816.207" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="1816.207" y2="1816.207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="253.5" y="1811.4648">HTTP/1.1 404 Not Found</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="1104" y1="1825.207" y2="1825.207"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="1835.8418">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,1856.4727,237.5,1860.4727,247.5,1864.4727,243.5,1860.4727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="1860.4727" y2="1860.4727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="1855.7305">HTTP/1.1 500 ServiceUnavailable</text><polygon fill="#A80036" points="1039.5,1908.0938,1029.5,1912.0938,1039.5,1916.0938,1035.5,1912.0938" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2172,1908.0938,2182,1912.0938,2172,1916.0938,2176,1912.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2178" y1="1912.0938" y2="1912.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="1045.5" y="1892.041">&#xB9AC;&#xBDF0;&#xB97C; &#xD1B5;&#xD558;&#xC5EC; &#xC9C0;&#xAE09; &#xBC1B;&#xC740; &#xC794;&#xC5EC; &#xD3EC;&#xC778;&#xD2B8; &#xC874;&#xC7AC; &#xC720;&#xBB34; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="420" x="1049.5" y="1907.3516">- userPointRepository.getAvailableReviewPoint(userId: UUID): Long</text><polygon fill="#A80036" points="1039.5,1968.0254,1029.5,1972.0254,1039.5,1976.0254,1035.5,1972.0254" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2331,1968.0254,2341,1972.0254,2331,1976.0254,2335,1972.0254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2337" y1="1972.0254" y2="1972.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1045.5" y="1936.6621">&#xB9AC;&#xBDF0; &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC815;&#xCC45; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="513" x="1049.5" y="1951.9727">- reviewPolicyRepository.findByType(type: ReviewPolicyType): List&lt;ReviewPolicy&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="1049.5" y="1967.2832">- &#xC815;&#xCC45; &#xD14C;&#xC774;&#xBE14;&#xC5D0; &#xC874;&#xC7AC;&#xD558;&#xB294; &#xC9C0;&#xAE09; &#xAE08;&#xC561;&#xC744; &#xAE30;&#xC900;&#xC73C;&#xB85C; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09;/&#xCC28;&#xAC10; &#xC9C4;&#xD589;</text><path d="M162.5,1987.0254 L224.5,1987.0254 L224.5,1994.0254 L214.5,2004.0254 L162.5,2004.0254 L162.5,1987.0254 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="1987.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="2000.5938">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="239.5" y="1999.6602">[&#xC9C0;&#xAE09; &#xC815;&#xCC45; &#xB370;&#xC774;&#xD130;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,2021.6465,237.5,2025.6465,247.5,2029.6465,243.5,2025.6465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="2025.6465" y2="2025.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="253.5" y="2020.9043">HTTP/1.1 400 BadRequest</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="1104" y1="2034.6465" y2="2034.6465"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="2045.2813">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,2065.9121,237.5,2069.9121,247.5,2073.9121,243.5,2069.9121" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="2069.9121" y2="2069.9121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="2065.1699">HTTP/1.1 500 ServiceUnavailable</text><polygon fill="#A80036" points="1039.5,2132.8438,1029.5,2136.8438,1039.5,2140.8438,1035.5,2136.8438" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2009,2132.8438,2019,2136.8438,2009,2140.8438,2013,2136.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2015" y1="2136.8438" y2="2136.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="1045.5" y="2101.4805">&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="591" x="1049.5" y="2116.791">- reviewPointRepository.findOneByReviewIdOrderByCreateAtDesc(reviewId: UUID): ReviewPoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="1049.5" y="2132.1016">- &#xAD6C;&#xCCB4;&#xC801;&#xC778; &#xC9C0;&#xAE09; &#xB0B4;&#xC5ED;&#xC744; JSON deserialize</text><path d="M923,2151.8438 L985,2151.8438 L985,2158.8438 L975,2168.8438 L923,2168.8438 L923,2151.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="296.9707" style="stroke: #000000; stroke-width: 2.0;" width="903.5" x="923" y="2151.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="938" y="2165.4121">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="1000" y="2164.4785">[&#xCCA8;&#xBD80; &#xC774;&#xBBF8;&#xC9C0; &#xCD94;&#xAC00;&#xC5D0; &#xB530;&#xB978; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC815;&#xCC45; &#xC874;&#xC7AC;]</text><path d="M933,2176.1543 L995,2176.1543 L995,2183.1543 L985,2193.1543 L933,2193.1543 L933,2176.1543 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="265.6602" style="stroke: #000000; stroke-width: 2.0;" width="883.5" x="933" y="2176.1543"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="948" y="2189.7227">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="214" x="1010" y="2188.7891">[&#xAE00;&#xB9CC; &#xC791;&#xC131;&#xD558;&#xC5EC; &#xD3EC;&#xC778;&#xD2B8;&#xB97C; &#xC9C0;&#xAE09; &#xBC1B;&#xC558;&#xC744; &#xACBD;&#xC6B0; &amp;&amp;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="1010" y="2201.7441">&#xC694;&#xCCAD; &#xBCF8;&#xBB38;&#xC5D0; &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80;ID&#xAC00; &#xD3EC;&#xD568;&#xB418;&#xC5B4; &#xC788;&#xC74C;]</text><polygon fill="#A80036" points="1039.5,2236.9961,1029.5,2240.9961,1039.5,2244.9961,1035.5,2240.9961" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1715.5,2236.9961,1725.5,2240.9961,1715.5,2244.9961,1719.5,2240.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1721.5" y1="2240.9961" y2="2240.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1045.5" y="2220.9434">&#xCCA8;&#xBD80; &#xC774;&#xBBF8;&#xC9C0; &#xC874;&#xC7AC; &#xC720;&#xBB34; &#xCCB4;&#xD06C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="1049.5" y="2236.2539">- attachmentRepository.countByIds(ids: List&lt;UUID&gt;) : Long</text><path d="M943,2255.9961 L1005,2255.9961 L1005,2262.9961 L995,2272.9961 L943,2272.9961 L943,2255.9961 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="290.5" x="943" y="2255.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="2269.5645">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1020" y="2268.6309">[&#xCC38;&#xBD80; &#xC774;&#xBBF8;&#xC9C0;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xB294; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="2309.9277" y2="2309.9277"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="2309.9277" y2="2322.9277"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="2322.9277" y2="2322.9277"/><polygon fill="#A80036" points="1039.5,2318.9277,1029.5,2322.9277,1039.5,2326.9277,1035.5,2322.9277" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="2289.875">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1035.5" y="2305.1855">- &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC774;&#xB825; &#xCD94;&#xAC00;</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="933" x2="1816.5" y1="2338.9277" y2="2338.9277"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="453" x="938" y="2349.5625">[&#xC694;&#xCCAD; &#xBCF8;&#xBB38;&#xC5D0; &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; ID&#xAC00; &#xC5C6;&#xC73C;&#xBA70; &amp;&amp; &#xAE00;&#xACFC; &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80;&#xB97C; &#xD1B5;&#xD558;&#xC5EC; &#xD3EC;&#xC778;&#xD2B8;&#xB97C; &#xC9C0;&#xAE09; &#xBC1B;&#xC558;&#xC744; &#xACBD;&#xC6B0;]</text><path d="M943,2359.8828 L1005,2359.8828 L1005,2366.8828 L995,2376.8828 L943,2376.8828 L943,2359.8828 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="290.5" x="943" y="2359.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="2373.4512">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164" x="1020" y="2372.5176">[&#xCC28;&#xAC10; &#xAC00;&#xB2A5;&#xD55C; &#xAE08;&#xC561;&#xC774; &#xC874;&#xC7AC;&#xD558;&#xB294; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="2413.8145" y2="2413.8145"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="2413.8145" y2="2426.8145"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="2426.8145" y2="2426.8145"/><polygon fill="#A80036" points="1039.5,2422.8145,1029.5,2426.8145,1039.5,2430.8145,1035.5,2426.8145" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="2393.7617">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1035.5" y="2409.0723">- &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; &#xD3EC;&#xC778;&#xD2B8; &#xCC28;&#xAC10; &#xC774;&#xB825; &#xCD94;&#xAC00;</text><polygon fill="#A80036" points="1039.5,2503.7461,1029.5,2507.7461,1039.5,2511.7461,1035.5,2507.7461" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1861.5,2503.7461,1871.5,2507.7461,1861.5,2511.7461,1865.5,2507.7461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1867.5" y1="2507.7461" y2="2507.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1045.5" y="2472.3828">Point &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; save</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1049.5" y="2487.6934">-pointRepository.saveAll(points: List&lt;Point&gt;)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="544" x="1049.5" y="2503.0039">- &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80;&#xAC00; &#xBE60;&#xC838;&#xC11C; &#xC0DD;&#xAE30;&#xB294; &#xCC28;&#xAC10;&#xC758; &#xACBD;&#xC6B0; &#xCD5C;&#xCD08; &#xC9C0;&#xAE09; &#xB0B4;&#xC5ED;&#xC758; PointId&#xB97C; OriginalId&#xC5D0; &#xC800;&#xC7A5;&#xD558;&#xC5EC; &#xC774;&#xB825; &#xBCF4;&#xAD00;</text><polygon fill="#A80036" points="1039.5,2563.6777,1029.5,2567.6777,1039.5,2571.6777,1035.5,2567.6777" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2009,2563.6777,2019,2567.6777,2009,2571.6777,2013,2567.6777" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2015" y1="2567.6777" y2="2567.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1045.5" y="2532.3145">&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; Insert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="1049.5" y="2547.625">- reviewPointRepository.insert(ReviewPoint)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="632" x="1049.5" y="2562.9355">- &#xB9AC;&#xBDF0; &#xC218;&#xC815;&#xC5D0; &#xB530;&#xB978; &#xAD6C;&#xCCB4;&#xC801;&#xC778; &#xC9C0;&#xAE09;/&#xCC28;&#xAC10; &#xB0B4;&#xC5ED;&#xC744; &#xCEEC;&#xB7FC;&#xC5D0; JSON Serialize &#xD55C; &#xD6C4; &#xBC18;&#xC601;, point &#xC5D4;&#xD2F0;&#xD2F0;&#xC758; ID &#xAC12;&#xC744; &#xD3EC;&#xD568;&#xD574;&#xC57C; &#xD55C;&#xB2E4;.</text><polygon fill="#A80036" points="1039.5,2608.2988,1029.5,2612.2988,1039.5,2616.2988,1035.5,2612.2988" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1861.5,2608.2988,1871.5,2612.2988,1861.5,2616.2988,1865.5,2612.2988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1867.5" y1="2612.2988" y2="2612.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="1045.5" y="2592.2461">Point &#xC9D1;&#xACC4; &#xB370;&#xC774;&#xD130; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="1049.5" y="2607.5566">- pointRepository.getAmountSumByUserId(userId: UUID): Long</text><polygon fill="#A80036" points="1039.5,2652.9199,1029.5,2656.9199,1039.5,2660.9199,1035.5,2656.9199" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2172,2652.9199,2182,2656.9199,2172,2660.9199,2176,2656.9199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2178" y1="2656.9199" y2="2656.9199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1045.5" y="2636.8672">&#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xC5C5;&#xB370;&#xC774;&#xD2B8;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="1049.5" y="2652.1777">- userPointRepository.save(entity: UserPoint): UserPoint</text><polygon fill="#A80036" points="486.5,2682.2305,476.5,2686.2305,486.5,2690.2305,482.5,2686.2305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="480.5" x2="1017.5" y1="2686.2305" y2="2686.2305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="492.5" y="2681.4883">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xBC18;&#xD658;</text><polygon fill="#A80036" points="247.5,2711.541,237.5,2715.541,247.5,2719.541,243.5,2715.541" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="464.5" y1="2715.541" y2="2715.541"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="253.5" y="2710.7988">HTTP/1.1 200 OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="236.5" x2="278.5" y1="2760.1621" y2="2760.1621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="278.5" x2="278.5" y1="2760.1621" y2="2773.1621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237.5" x2="278.5" y1="2773.1621" y2="2773.1621"/><polygon fill="#A80036" points="247.5,2769.1621,237.5,2773.1621,247.5,2777.1621,243.5,2773.1621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="243.5" y="2740.1094">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xCE90;&#xC2DC; &#xCC98;&#xB9AC;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="247.5" y="2755.4199">- setUserPointCache(userId: UUID)</text><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2431.5" x="3" y="2801.8174"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="2801.8174" y2="2801.8174"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2434.5" y1="2804.8174" y2="2804.8174"/><rect fill="#EEEEEE" filter="url(#f1oqf1f4lyepvk)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="166" x="1135.75" y="2791.1621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="1141.75" y="2807.7305">&#xB9AC;&#xBDF0; &#xC0AD;&#xC81C;&#xC5D0; &#xB530;&#xB978; &#xD3EC;&#xC778;&#xD2B8; &#xBCC0;&#xACBD;</text><polygon fill="#A80036" points="1006.5,2841.7832,1016.5,2845.7832,1006.5,2849.7832,1010.5,2845.7832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475.5" x2="1012.5" y1="2845.7832" y2="2845.7832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="482.5" y="2841.041">processPoints()</text><polygon fill="#A80036" points="1039.5,2886.4043,1029.5,2890.4043,1039.5,2894.4043,1035.5,2890.4043" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2172,2886.4043,2182,2890.4043,2172,2894.4043,2176,2890.4043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2178" y1="2890.4043" y2="2890.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="1045.5" y="2870.3516">&#xB9AC;&#xBDF0;&#xB97C; &#xD1B5;&#xD558;&#xC5EC; &#xC9C0;&#xAE09; &#xBC1B;&#xC740; &#xC794;&#xC5EC; &#xD3EC;&#xC778;&#xD2B8; &#xC874;&#xC7AC; &#xC720;&#xBB34; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="420" x="1049.5" y="2885.6621">- userPointRepository.getAvailableReviewPoint(userId: UUID): Long</text><path d="M162.5,2905.4043 L224.5,2905.4043 L224.5,2912.4043 L214.5,2922.4043 L162.5,2922.4043 L162.5,2905.4043 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="2905.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="2918.9727">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164" x="239.5" y="2918.0391">[&#xC794;&#xC5EC; &#xD3EC;&#xC778;&#xD2B8;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,2940.0254,237.5,2944.0254,247.5,2948.0254,243.5,2944.0254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="2944.0254" y2="2944.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="253.5" y="2939.2832">HTTP/1.1 400 BadRequest</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="1104" y1="2953.0254" y2="2953.0254"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="2963.6602">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,2984.291,237.5,2988.291,247.5,2992.291,243.5,2988.291" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="2988.291" y2="2988.291"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="2983.5488">HTTP/1.1 500 ServiceUnavailable</text><polygon fill="#A80036" points="1039.5,3035.9121,1029.5,3039.9121,1039.5,3043.9121,1035.5,3039.9121" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1563.5,3035.9121,1573.5,3039.9121,1563.5,3043.9121,1567.5,3039.9121" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1569.5" y1="3039.9121" y2="3039.9121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1045.5" y="3019.8594">&#xC7A5;&#xC18C;&#xBCC4; &#xD68C;&#xC6D0; &#xB9AC;&#xBDF0; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="505" x="1049.5" y="3035.1699">- reviewRepository.countByPlaceIdAndUserId(placeId: UUID, userId: UUID) : Long</text><path d="M162.5,3054.9121 L224.5,3054.9121 L224.5,3061.9121 L214.5,3071.9121 L162.5,3071.9121 L162.5,3054.9121 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="941.5" x="162.5" y="3054.9121"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="177.5" y="3068.4805">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="239.5" y="3067.5469">[&#xB370;&#xC774;&#xD130;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,3089.5332,237.5,3093.5332,247.5,3097.5332,243.5,3093.5332" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="3093.5332" y2="3093.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="253.5" y="3088.791">HTTP/1.1 404 Not Found</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="1104" y1="3102.5332" y2="3102.5332"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="167.5" y="3113.168">[&#xB370;&#xC774;&#xD130;&#xBCA0;&#xC774;&#xC2A4; &#xC870;&#xD68C; &#xC911; &#xC5D0;&#xB7EC;&#xAC00; &#xBC1C;&#xC0DD; &#xD588;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="247.5,3133.7988,237.5,3137.7988,247.5,3141.7988,243.5,3137.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="1017.5" y1="3137.7988" y2="3137.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="253.5" y="3133.0566">HTTP/1.1 500 ServiceUnavailable</text><polygon fill="#A80036" points="1039.5,3200.7305,1029.5,3204.7305,1039.5,3208.7305,1035.5,3204.7305" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2009,3200.7305,2019,3204.7305,2009,3208.7305,2013,3204.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2015" y1="3204.7305" y2="3204.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="1045.5" y="3169.3672">&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="591" x="1049.5" y="3184.6777">- reviewPointRepository.findOneByReviewIdOrderByCreateAtDesc(reviewId: UUID): ReviewPoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="1049.5" y="3199.9883">- &#xAD6C;&#xCCB4;&#xC801;&#xC778; &#xC9C0;&#xAE09; &#xB0B4;&#xC5ED;&#xC744; JSON deserialize</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="3249.3516" y2="3249.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="3249.3516" y2="3262.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="3262.3516" y2="3262.3516"/><polygon fill="#A80036" points="1039.5,3258.3516,1029.5,3262.3516,1039.5,3266.3516,1035.5,3262.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="3229.2988">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="1035.5" y="3244.6094">- &#xAE00; &#xC791;&#xC131; &#xD3EC;&#xC778;&#xD2B8; &#xCC28;&#xAC10; &#xC774;&#xB825; &#xCD94;&#xAC00;</text><path d="M943,3277.3516 L1005,3277.3516 L1005,3284.3516 L995,3294.3516 L943,3294.3516 L943,3277.3516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="390" x="943" y="3277.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="3290.9199">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="308" x="1020" y="3289.9863">[&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC774;&#xB825;&#xC5D0; &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; &#xC774;&#xB825;&#xC774; &#xD3EC;&#xD568; &#xB418;&#xC5B4; &#xC788;&#xC744; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="3331.2832" y2="3331.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="3331.2832" y2="3344.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="3344.2832" y2="3344.2832"/><polygon fill="#A80036" points="1039.5,3340.2832,1029.5,3344.2832,1039.5,3348.2832,1035.5,3344.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="3311.2305">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1035.5" y="3326.541">- &#xC774;&#xBBF8;&#xC9C0; &#xCCA8;&#xBD80; &#xD3EC;&#xC778;&#xD2B8; &#xCC28;&#xAC10; &#xC774;&#xB825; &#xCD94;&#xAC00;</text><path d="M943,3366.2832 L1005,3366.2832 L1005,3373.2832 L995,3383.2832 L943,3383.2832 L943,3366.2832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="438" x="943" y="3366.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="958" y="3379.8516">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="356" x="1020" y="3378.918">[&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC9C0;&#xAE09; &#xC774;&#xB825;&#xC5D0; &#xC7A5;&#xC18C;&#xBCC4; &#xCD5C;&#xCD08; &#xB9AC;&#xBDF0; &#xC791;&#xC131; &#xC774;&#xB825;&#xC774; &#xD3EC;&#xD568; &#xB418;&#xC5B4; &#xC788;&#xC744; &#xACBD;&#xC6B0;]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028.5" x2="1070.5" y1="3420.2148" y2="3420.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1070.5" y1="3420.2148" y2="3433.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1029.5" x2="1070.5" y1="3433.2148" y2="3433.2148"/><polygon fill="#A80036" points="1039.5,3429.2148,1029.5,3433.2148,1039.5,3437.2148,1035.5,3433.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1035.5" y="3400.1621">Point() &#xC5D4;&#xD2F0;&#xD2F0; &#xC0DD;&#xC131;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="1035.5" y="3415.4727">- &#xC7A5;&#xC18C;&#xBCC4; &#xCD5C;&#xCD08; &#xB9AC;&#xBDF0; &#xC791;&#xC131; &#xD3EC;&#xC778;&#xD2B8; &#xCC28;&#xAC10; &#xC774;&#xB825; &#xCD94;&#xAC00;</text><polygon fill="#A80036" points="1039.5,3511.457,1029.5,3515.457,1039.5,3519.457,1035.5,3515.457" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1861.5,3511.457,1871.5,3515.457,1861.5,3519.457,1865.5,3515.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1867.5" y1="3515.457" y2="3515.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1045.5" y="3464.7832">Point &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; save</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1049.5" y="3480.0938">-pointRepository.saveAll(points: List&lt;Point&gt;)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="1049.5" y="3495.4043">- &#xCD5C;&#xCD08; &#xC9C0;&#xAE09; &#xB0B4;&#xC5ED;&#xC758; PointId&#xB97C; OriginalId&#xC5D0; &#xC800;&#xC7A5;&#xD558;&#xC5EC; &#xC774;&#xB825; &#xBCF4;&#xAD00;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1049.5" y="3510.7148">- &#xB9AC;&#xBDF0; &#xC0AD;&#xC81C;&#xC5D0; &#xB530;&#xB978; &#xCC28;&#xAC10; &#xC774;&#xB825; &#xCD94;&#xAC00;</text><polygon fill="#A80036" points="1039.5,3571.3887,1029.5,3575.3887,1039.5,3579.3887,1035.5,3575.3887" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2009,3571.3887,2019,3575.3887,2009,3579.3887,2013,3575.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2015" y1="3575.3887" y2="3575.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1045.5" y="3540.0254">&#xB9AC;&#xBDF0; &#xD3EC;&#xC778;&#xD2B8; &#xC774;&#xB825; &#xB370;&#xC774;&#xD130; Insert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="1049.5" y="3555.3359">- reviewPointRepository.insert(ReviewPoint)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="1049.5" y="3570.6465">- &#xAD6C;&#xCCB4;&#xC801;&#xC778; &#xCC28;&#xAC10; &#xC774;&#xB825;&#xC744; &#xCEEC;&#xB7FC;&#xC5D0; JSON Serialize &#xD55C; &#xD6C4; &#xBC18;&#xC601;</text><polygon fill="#A80036" points="1039.5,3616.0098,1029.5,3620.0098,1039.5,3624.0098,1035.5,3620.0098" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1861.5,3616.0098,1871.5,3620.0098,1861.5,3624.0098,1865.5,3620.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="1867.5" y1="3620.0098" y2="3620.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="1045.5" y="3599.957">Point &#xC9D1;&#xACC4; &#xB370;&#xC774;&#xD130; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="1049.5" y="3615.2676">- pointRepository.getAmountSumByUserId(userId: UUID): Long</text><polygon fill="#A80036" points="1039.5,3660.6309,1029.5,3664.6309,1039.5,3668.6309,1035.5,3664.6309" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2172,3660.6309,2182,3664.6309,2172,3668.6309,2176,3664.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033.5" x2="2178" y1="3664.6309" y2="3664.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1045.5" y="3644.5781">&#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xC5C5;&#xB370;&#xC774;&#xD2B8;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="1049.5" y="3659.8887">- userPointRepository.save(entity: UserPoint): UserPoint</text><polygon fill="#A80036" points="486.5,3689.9414,476.5,3693.9414,486.5,3697.9414,482.5,3693.9414" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="480.5" x2="1017.5" y1="3693.9414" y2="3693.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="492.5" y="3689.1992">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xBC18;&#xD658;</text><polygon fill="#A80036" points="247.5,3719.252,237.5,3723.252,247.5,3727.252,243.5,3723.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="241.5" x2="464.5" y1="3723.252" y2="3723.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="253.5" y="3718.5098">HTTP/1.1 200 OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="236.5" x2="278.5" y1="3767.873" y2="3767.873"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="278.5" x2="278.5" y1="3767.873" y2="3780.873"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237.5" x2="278.5" y1="3780.873" y2="3780.873"/><polygon fill="#A80036" points="247.5,3776.873,237.5,3780.873,247.5,3784.873,243.5,3780.873" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="243.5" y="3747.8203">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xCE90;&#xC2DC; &#xCC98;&#xB9AC;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="247.5" y="3763.1309">- setUserPointCache(userId: UUID)</text><!--
@startuml
skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam classFontName Courier


box SERVICE_API
	actor User
	participant ServiceAPI

	User -> ServiceAPI : HTTP/1.1 POST /v1/reviews
	ServiceAPI - -> User : HTTP/1.1 200 OK
end box

box EVENT_API
	participant EventController
	participant UserService
	participant PointService
	database UserRepository
	database ReviewRepository
	database AttachmentRepository
	database PointRepository
	database ReviewPointRepository
	database UserPointRepository
	database PointPolicyRepository

	== 포인트 적립(리뷰 작성/수정/삭제 공통 로직) ==
	ServiceAPI -> ServiceAPI: 리뷰 작성/수정/삭제 \n응답 이후에 이벤트 처리
	
	ServiceAPI -> EventController: HTTP/1.1 POST /v1/events
	activate EventController
	EventController -> EventController: Validate RequestBody\n - 요청 본문의 데이터 타입 및 필수 값 체크
	EventController -> UserService: validateUser(id: UUID)\n - 별도 인증 Flow가 존재 할 경우 데이터베이스를 조회하지 않을 수 있음.
	activate UserService
	UserService -> UserRepository: userRepository.countById(id: UUID): Long
	alt 존재하지 않은 유저일 경우
		UserService - -> ServiceAPI: HTTP/1.1 400 BadRequest
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		UserService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end
	deactivate UserService


	== 리뷰 작성에 따른 포인트 적립 ==
	EventController -> PointService: processPoints()
	activate PointService

	PointService <-> PointPolicyRepository: 포인트 지급 정책 조회\n - reviewPolicyRepository.findByType(type: ReviewPolicyType): List<ReviewPolicy>\n - 정책 테이블에 존재하는 지급 금액을 기준으로 포인트 지급 진행
	alt 지급 정책 데이터가 존재하지 않을 경우
		PointService - -> ServiceAPI: HTTP/1.1 400 BadRequest
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		PointService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end

	PointService <-> ReviewRepository: 장소별 회원 리뷰 조회\n - reviewRepository.countByPlaceIdAndUserId(placeId: UUID, userId: UUID) : Long
	alt 데이터가 존재하지 않을 경우
		PointService - -> ServiceAPI: HTTP/1.1 404 Not Found
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		PointService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end	


	alt 리뷰 엔티티의 content 값이 존재 && 글에 대한 리뷰 정책이 존재하는 경우
		PointService -> PointService : Point() 엔티티 생성
	end
	alt 이미지 첨부 시 포인트 지급 정책이 있을 경우 && 요청 본문에 첨부 이미지(`attachedPhotos`)가 있을 경우\n&& 요청 본문의 이미지 ID(`attachedPhotos`)들과 조회한 엔티티의 이미지 ID(`attachedPhotos`)가 동일 했을 경우
		PointService <-> AttachmentRepository: 첨부 이미지 존재 유무 체크\n - attachmentRepository.countByIds(ids: List<UUID>) : Long
		alt 첨부 이미지가 정상적으로 DB에 저정되어 있을 경우
			PointService -> PointService : Point() 엔티티 생성
		end
	end

	alt 장소별 최초 지급 정책이 존재하는 경우
		PointService <-> ReviewRepository: 장소별 최초 작성 유무 체크\n - reviewRepository.findTopOne(placeId: UUID) : Review\n - placeId를 기준, 리뷰 작성일 역순 정렬로 테이블의 Top 1의 엔티티를 조회
		alt 조회한 엔티티의 userId와 요청 본문의 userId가 같을 경우
			PointService -> PointService : Point() 엔티티 생성
		end		
	end


	PointService <-> PointRepository: Point 이력 데이터 save \n -pointRepository.saveAll(points: List<Point>)
	
	PointService <-> ReviewPointRepository: 리뷰 포인트 이력 데이터 Insert\n - reviewPointRepository.insert(ReviewPoint)\n - 리뷰 작성에 따른 구체적인 지급 내역을 컬럼에 JSON Serialize 한 후 반영\n - serialize하는 데이터에 point를 참조 할 수 있는 ID 데이터를 포함한다.
	
	PointService <-> PointRepository: Point 집계 데이터 조회\n - pointRepository.getAmountSumByUserId(userId: UUID): Long


	PointService <-> UserPointRepository: 회원 포인트 데이터 업데이트\n - userPointRepository.save(entity: UserPoint): UserPoint
	deactivate PointService
	PointService - -> EventController: 집계된 회원 포인트 데이터 반환
	EventController - -> ServiceAPI: HTTP/1.1 200 OK
	deactivate ServiceAPI

	ServiceAPI -> ServiceAPI: 집계된 회원 포인트 데이터 캐시 처리\n - setUserPointCache(userId: UUID)



	== 리뷰 수정에 따른 포인트 변경 ==
	
	EventController -> PointService: processPoints()
	activate PointService

	PointService <-> ReviewRepository: 장소별 회원 리뷰 조회\n - reviewRepository.findOneByPlaceIdAndUserId(placeId: UUID, userId: UUID) : Long
	alt 데이터가 존재하지 않을 경우
		PointService - -> ServiceAPI: HTTP/1.1 404 Not Found
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		PointService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end

	PointService <-> UserPointRepository: 리뷰를 통하여 지급 받은 잔여 포인트 존재 유무 조회\n - userPointRepository.getAvailableReviewPoint(userId: UUID): Long	

	PointService <-> PointPolicyRepository: 리뷰 이미지 첨부 포인트 지급 정책 조회\n - reviewPolicyRepository.findByType(type: ReviewPolicyType): List<ReviewPolicy>\n - 정책 테이블에 존재하는 지급 금액을 기준으로 포인트 지급/차감 진행
	alt 지급 정책 데이터가 존재하지 않을 경우
		PointService - -> ServiceAPI: HTTP/1.1 400 BadRequest
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		PointService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end

	PointService <-> ReviewPointRepository: 리뷰 포인트 이력 데이터 조회\n - reviewPointRepository.findOneByReviewIdOrderByCreateAtDesc(reviewId: UUID): ReviewPoint\n - 구체적인 지급 내역을 JSON deserialize

	alt 첨부 이미지 추가에 따른 포인트 지급 정책 존재 
		alt 글만 작성하여 포인트를 지급 받았을 경우 &&\n요청 본문에 이미지 첨부ID가 포함되어 있음

			PointService <-> AttachmentRepository: 첨부 이미지 존재 유무 체크\n - attachmentRepository.countByIds(ids: List<UUID>) : Long
			
				alt 참부 이미지가 존재하는 경우
					PointService <-> PointService: Point() 엔티티 생성\n- 이미지 첨부 포인트 지급 이력 추가			
				end
		else 요청 본문에 이미지 첨부 ID가 없으며 && 글과 이미지 첨부를 통하여 포인트를 지급 받았을 경우
			alt 차감 가능한 금액이 존재하는 경우
				PointService <-> PointService: Point() 엔티티 생성\n- 이미지 첨부 포인트 차감 이력 추가
			end
		end 
	end

	PointService <-> PointRepository: Point 이력 데이터 save \n -pointRepository.saveAll(points: List<Point>)\n - 이미지 첨부가 빠져서 생기는 차감의 경우 최초 지급 내역의 PointId를 OriginalId에 저장하여 이력 보관
	
	PointService <-> ReviewPointRepository: 리뷰 포인트 이력 데이터 Insert\n - reviewPointRepository.insert(ReviewPoint)\n - 리뷰 수정에 따른 구체적인 지급/차감 내역을 컬럼에 JSON Serialize 한 후 반영, point 엔티티의 ID 값을 포함해야 한다.
	
	PointService <-> PointRepository: Point 집계 데이터 조회\n - pointRepository.getAmountSumByUserId(userId: UUID): Long

	PointService <-> UserPointRepository: 회원 포인트 데이터 업데이트\n - userPointRepository.save(entity: UserPoint): UserPoint

	PointService - -> EventController: 집계된 회원 포인트 데이터 반환
	EventController - -> ServiceAPI: HTTP/1.1 200 OK
	deactivate PointService

	ServiceAPI -> ServiceAPI: 집계된 회원 포인트 데이터 캐시 처리\n - setUserPointCache(userId: UUID)


	== 리뷰 삭제에 따른 포인트 변경 ==
	EventController -> PointService: processPoints()
	activate PointService

	PointService <-> UserPointRepository: 리뷰를 통하여 지급 받은 잔여 포인트 존재 유무 조회\n - userPointRepository.getAvailableReviewPoint(userId: UUID): Long
	alt 잔여 포인트가 존재하지 않을 경우
		PointService - -> ServiceAPI: HTTP/1.1 400 BadRequest
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		PointService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end	

	PointService <-> ReviewRepository: 장소별 회원 리뷰 조회\n - reviewRepository.countByPlaceIdAndUserId(placeId: UUID, userId: UUID) : Long
	alt 데이터가 존재하지 않을 경우
		PointService - -> ServiceAPI: HTTP/1.1 404 Not Found
	else 데이터베이스 조회 중 에러가 발생 했을 경우
		PointService - -> ServiceAPI: HTTP/1.1 500 ServiceUnavailable
	end

	PointService <-> ReviewPointRepository: 리뷰 포인트 이력 데이터 조회\n - reviewPointRepository.findOneByReviewIdOrderByCreateAtDesc(reviewId: UUID): ReviewPoint\n - 구체적인 지급 내역을 JSON deserialize

	PointService <-> PointService: Point() 엔티티 생성\n- 글 작성 포인트 차감 이력 추가
	alt 리뷰 포인트 지급 이력에 이미지 첨부 이력이 포함 되어 있을 경우
		PointService <-> PointService: Point() 엔티티 생성\n- 이미지 첨부 포인트 차감 이력 추가
	end

	alt 리뷰 포인트 지급 이력에 장소별 최초 리뷰 작성 이력이 포함 되어 있을 경우
		PointService <-> PointService: Point() 엔티티 생성\n- 장소별 최초 리뷰 작성 포인트 차감 이력 추가
	end

	PointService <-> PointRepository: Point 이력 데이터 save \n -pointRepository.saveAll(points: List<Point>)\n - 최초 지급 내역의 PointId를 OriginalId에 저장하여 이력 보관\n - 리뷰 삭제에 따른 차감 이력 추가
	
	PointService <-> ReviewPointRepository: 리뷰 포인트 이력 데이터 Insert\n - reviewPointRepository.insert(ReviewPoint)\n - 구체적인 차감 이력을 컬럼에 JSON Serialize 한 후 반영
	
	PointService <-> PointRepository: Point 집계 데이터 조회\n - pointRepository.getAmountSumByUserId(userId: UUID): Long

	PointService <-> UserPointRepository: 회원 포인트 데이터 업데이트\n - userPointRepository.save(entity: UserPoint): UserPoint

	PointService - -> EventController: 집계된 회원 포인트 데이터 반환
	EventController - -> ServiceAPI: HTTP/1.1 200 OK
	deactivate PointService

	ServiceAPI -> ServiceAPI: 집계된 회원 포인트 데이터 캐시 처리\n - setUserPointCache(userId: UUID)
end box
@enduml

PlantUML version 1.2019.03(Sun Mar 10 20:04:44 KST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.1+10
Operating System: Mac OS X
OS Version: 10.14.3
Default Encoding: US-ASCII
Language: ko
Country: KR
--></g></svg></p><h2 class="mume-header" id="%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%A1%B0%ED%9A%8C-api-sequence">&#xD3EC;&#xC778;&#xD2B8; &#xC870;&#xD68C; API Sequence</h2>

<ul>
<li>&#xD3EC;&#xC778;&#xD2B8; &#xC870;&#xD68C; API &#xD638;&#xCD9C;&#xC5D0;&#xC11C; &#xBC1C;&#xC0DD;&#xD558;&#xB294; &#xD750;&#xB984;&#xC5D0; &#xB300;&#xD558;&#xC5EC; &#xAE30;&#xC220;
<ul>
<li>&#xD3EC;&#xC778;&#xD2B8; &#xC801;&#xB9BD; API &#xD638;&#xCD9C;&#xC758; &#xC751;&#xB2F5; &#xAC12;&#xC744; &#xAE30;&#xC900;&#xC73C;&#xB85C; &#xCE90;&#xC2DC; &#xB370;&#xC774;&#xD130; &#xD65C;&#xC6A9;</li>
<li>&#xCE90;&#xC2DC; &#xB370;&#xC774;&#xD130; &#xB9CC;&#xB8CC;&#xC758; &#xACBD;&#xC6B0;, &#xD3EC;&#xC778;&#xD2B8; &#xC870;&#xD68C; API &#xD638;&#xCD9C; &#xD6C4; &#xCE90;&#xC2DC; &#xCC98;&#xB9AC;</li>
</ul>
</li>
<li>&#xCC98;&#xB9AC; &#xC2DC; &#xBC1C;&#xC0DD;&#xD558;&#xB294; &#xC608;&#xC678; &#xCF00;&#xC774;&#xC2A4;&#xC5D0; &#xB300;&#xD574;&#xC11C;&#xB294; HTTP STATUS 4XX/5XX&#xB97C; &#xBC18;&#xD658;</li>
</ul>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="756px" preserveAspectRatio="none" style="width:1565px;height:756px;" version="1.1" viewBox="0 0 1565 756" width="1565px" zoomAndPan="magnify"><defs><filter height="300%" id="f1t08is8pdzdzo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="741.498" style="stroke: #A80036; stroke-width: 1.0;" width="400.5" x="14" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="172.75" y="16.5684">SERVICE_API</text><rect fill="#DDDDDD" height="741.498" style="stroke: #A80036; stroke-width: 1.0;" width="983" x="555.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="1010.5" y="16.5684">EVENT_API</text><rect fill="#FFFFFF" filter="url(#f1t08is8pdzdzo)" height="401.9688" style="stroke: #000000; stroke-width: 2.0;" width="1282" x="272.5" y="210.7305"/><rect fill="#FFFFFF" filter="url(#f1t08is8pdzdzo)" height="135.8633" style="stroke: #000000; stroke-width: 2.0;" width="995" x="549.5" y="264.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="36" x2="36" y1="106.7988" y2="659.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="346.5" x2="346.5" y1="106.7988" y2="659.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="656.5" x2="656.5" y1="106.7988" y2="659.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="895" x2="895" y1="106.7988" y2="659.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1060" x2="1060" y1="106.7988" y2="659.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1211" x2="1211" y1="106.7988" y2="659.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1461.5" x2="1461.5" y1="106.7988" y2="659.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="18" y="103.8457">User</text><ellipse cx="36.5" cy="33.3105" fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M36.5,41.3105 L36.5,68.3105 M23.5,49.3105 L49.5,49.3105 M36.5,68.3105 L23.5,83.3105 M36.5,68.3105 L49.5,83.3105 " fill="none" filter="url(#f1t08is8pdzdzo)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="18" y="671.5449">User</text><ellipse cx="36.5" cy="684.498" fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M36.5,692.498 L36.5,719.498 M23.5,700.498 L49.5,700.498 M36.5,719.498 L23.5,734.498 M36.5,719.498 L49.5,734.498 " fill="none" filter="url(#f1t08is8pdzdzo)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="302.5" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="309.5" y="91.8457">ServiceAPI</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="302.5" y="658.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="309.5" y="678.5449">ServiceAPI</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="579.5" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="586.5" y="91.8457">UserPointController</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="579.5" y="658.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="586.5" y="678.5449">UserPointController</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="847" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="854" y="91.8457">UserService</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="847" y="658.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="854" y="678.5449">UserService</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="994" y="71.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1001" y="91.8457">UserPointService</text><rect fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="994" y="658.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1001" y="678.5449">UserPointService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1156" y="103.8457">UserRepository</text><path d="M1193,54.3105 C1193,44.3105 1211,44.3105 1211,44.3105 C1211,44.3105 1229,44.3105 1229,54.3105 L1229,80.3105 C1229,90.3105 1211,90.3105 1211,90.3105 C1211,90.3105 1193,90.3105 1193,80.3105 L1193,54.3105 " fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1193,54.3105 C1193,64.3105 1211,64.3105 1211,64.3105 C1211,64.3105 1229,64.3105 1229,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1156" y="671.5449">UserRepository</text><path d="M1193,684.498 C1193,674.498 1211,674.498 1211,674.498 C1211,674.498 1229,674.498 1229,684.498 L1229,710.498 C1229,720.498 1211,720.498 1211,720.498 C1211,720.498 1193,720.498 1193,710.498 L1193,684.498 " fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1193,684.498 C1193,694.498 1211,694.498 1211,694.498 C1211,694.498 1229,694.498 1229,684.498 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="1389.5" y="103.8457">UserPointRepository</text><path d="M1444,54.3105 C1444,44.3105 1462,44.3105 1462,44.3105 C1462,44.3105 1480,44.3105 1480,54.3105 L1480,80.3105 C1480,90.3105 1462,90.3105 1462,90.3105 C1462,90.3105 1444,90.3105 1444,80.3105 L1444,54.3105 " fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1444,54.3105 C1444,64.3105 1462,64.3105 1462,64.3105 C1462,64.3105 1480,64.3105 1480,54.3105 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="1389.5" y="671.5449">UserPointRepository</text><path d="M1444,684.498 C1444,674.498 1462,674.498 1462,674.498 C1462,674.498 1480,674.498 1480,684.498 L1480,710.498 C1480,720.498 1462,720.498 1462,720.498 C1462,720.498 1444,720.498 1444,710.498 L1444,684.498 " fill="#FEFECE" filter="url(#f1t08is8pdzdzo)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1444,684.498 C1444,694.498 1462,694.498 1462,694.498 C1462,694.498 1480,694.498 1480,684.498 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><polygon fill="#A80036" points="334.5,134.1094,344.5,138.1094,334.5,142.1094,338.5,138.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="340.5" y1="138.1094" y2="138.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="43.5" y="133.3672">HTTP/1.1 GET /v1/users/{userId}/total-point</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="388.5" y1="182.7305" y2="182.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="388.5" y1="182.7305" y2="195.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="388.5" y1="195.7305" y2="195.7305"/><polygon fill="#A80036" points="357.5,191.7305,347.5,195.7305,357.5,199.7305,353.5,195.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="353.5" y="162.6777">&#xC9D1;&#xACC4;&#xB41C; &#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xCE90;&#xC2DC; &#xC874;&#xC7AC; &#xC720;&#xBB34; &#xD655;&#xC778;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="357.5" y="177.9883">- getUserPointCache(userId: UUID)</text><path d="M272.5,210.7305 L334.5,210.7305 L334.5,217.7305 L324.5,227.7305 L272.5,227.7305 L272.5,210.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="401.9688" style="stroke: #000000; stroke-width: 2.0;" width="1282" x="272.5" y="210.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="287.5" y="224.2988">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="247" x="349.5" y="223.3652">[userId&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; &#xCE90;&#xC2DC; &#xC815;&#xBCF4;&#xAC00; &#xC874;&#xC7AC;&#xD558;&#xC9C0; &#xC54A;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="644.5,245.3516,654.5,249.3516,644.5,253.3516,648.5,249.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="650.5" y1="249.3516" y2="249.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="353.5" y="244.6094">HTTP/1.1 GET /v1/users/{userId}/total-point</text><path d="M549.5,264.3516 L611.5,264.3516 L611.5,271.3516 L601.5,281.3516 L549.5,281.3516 L549.5,264.3516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="135.8633" style="stroke: #000000; stroke-width: 2.0;" width="995" x="549.5" y="264.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="564.5" y="277.9199">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="626.5" y="276.9863">[&#xC778;&#xC99D; Flow(TOKEN &#xD639;&#xC740; Session)&#xAC00; &#xC5C6;&#xC744; &#xACBD;&#xC6B0;]</text><polygon fill="#A80036" points="883.5,314.2832,893.5,318.2832,883.5,322.2832,887.5,318.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="889.5" y1="318.2832" y2="318.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="663.5" y="298.2305">&#xC874;&#xC7AC;&#xD558;&#xB294; &#xC720;&#xC800; &#xC720;&#xBB34; &#xCCB4;&#xD06C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="663.5" y="313.541">- existUser(userId: UUID): Boolean</text><polygon fill="#A80036" points="906.5,358.9043,896.5,362.9043,906.5,366.9043,902.5,362.9043" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1450,358.9043,1460,362.9043,1450,366.9043,1454,362.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="900.5" x2="1456" y1="362.9043" y2="362.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="912.5" y="342.8516">&#xC720;&#xC800; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="912.5" y="358.1621">- userRepository.countById(userId: UUID): Long</text><polygon fill="#A80036" points="667.5,388.2148,657.5,392.2148,667.5,396.2148,663.5,392.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="661.5" x2="894.5" y1="392.2148" y2="392.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="673.5" y="387.4727">&#xC874;&#xC7AC; &#xC720;&#xBB34; &#xBC18;&#xD658;</text><polygon fill="#A80036" points="1048,439.8359,1058,443.8359,1048,447.8359,1052,443.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="1054" y1="443.8359" y2="443.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="663.5" y="423.7832">&#xC720;&#xC800; &#xD3EC;&#xC778;&#xD2B8; &#xC870;&#xD68C; &#xC11C;&#xBE44;&#xC2A4; &#xD638;&#xCD9C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="667.5" y="439.0938">- getUserPoint(userId: UUID): UserPoint</text><polygon fill="#A80036" points="1071,484.457,1061,488.457,1071,492.457,1067,488.457" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1450,484.457,1460,488.457,1450,492.457,1454,488.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1065" x2="1456" y1="488.457" y2="488.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1077" y="468.4043">&#xC720;&#xC800; &#xD3EC;&#xC778;&#xD2B8; &#xC870;&#xD68C;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="374" x="1081" y="483.7148">- userPointRepository.findByUserId(userId: UUId): UserPoint</text><polygon fill="#A80036" points="667.5,513.7676,657.5,517.7676,667.5,521.7676,663.5,517.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="661.5" x2="1059" y1="517.7676" y2="517.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="673.5" y="513.0254">&#xD3EC;&#xC778;&#xD2B8; &#xC5D4;&#xD2F0;&#xD2F0; &#xBC18;&#xD658;</text><polygon fill="#A80036" points="357.5,543.0781,347.5,547.0781,357.5,551.0781,353.5,547.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351.5" x2="655.5" y1="547.0781" y2="547.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="363.5" y="542.3359">HTTP/1.1 200 OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="388.5" y1="591.6992" y2="591.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="388.5" y1="591.6992" y2="604.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="388.5" y1="604.6992" y2="604.6992"/><polygon fill="#A80036" points="357.5,600.6992,347.5,604.6992,357.5,608.6992,353.5,604.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="353.5" y="571.6465">&#xD68C;&#xC6D0; &#xD3EC;&#xC778;&#xD2B8; &#xB370;&#xC774;&#xD130; &#xCE90;&#xC2DC; &#xCC98;&#xB9AC;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="357.5" y="586.957">- setUserPointCache(userId: UUID)</text><polygon fill="#A80036" points="47.5,637.0098,37.5,641.0098,47.5,645.0098,43.5,641.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="345.5" y1="641.0098" y2="641.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="53.5" y="636.2676">HTTP/1.1 200 OK</text><!--
@startuml
skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam classFontName Courier

box SERVICE_API
	actor User
	participant ServiceAPI

	User -> ServiceAPI : HTTP/1.1 GET /v1/users/{userId}/total-point
	ServiceAPI -> ServiceAPI: 집계된 회원 포인트 데이터 캐시 존재 유무 확인\n - getUserPointCache(userId: UUID)

	
end box

box EVENT_API
	participant UserPointController
	participant UserService
	participant UserPointService
	database UserRepository
	database UserPointRepository
	
	alt userId에 해당하는 캐시 정보가 존재하지 않을 경우
		ServiceAPI -> UserPointController: HTTP/1.1 GET /v1/users/{userId}/total-point

		alt 인증 Flow(TOKEN 혹은 Session)가 없을 경우
			UserPointController -> UserService: 존재하는 유저 유무 체크\n- existUser(userId: UUID): Boolean
			UserService <-> UserPointRepository: 유저 조회\n- userRepository.countById(userId: UUID): Long
			UserService -> UserPointController: 존재 유무 반환
		end

		UserPointController -> UserPointService: 유저 포인트 조회 서비스 호출\n - getUserPoint(userId: UUID): UserPoint
		UserPointService <-> UserPointRepository: 유저 포인트 조회\n - userPointRepository.findByUserId(userId: UUId): UserPoint
		UserPointService -> UserPointController: 포인트 엔티티 반환
		UserPointController -> ServiceAPI: HTTP/1.1 200 OK

		ServiceAPI -> ServiceAPI: 회원 포인트 데이터 캐시 처리\n - setUserPointCache(userId: UUID)
	end



	ServiceAPI - -> User : HTTP/1.1 200 OK

end box
@enduml

PlantUML version 1.2019.03(Sun Mar 10 20:04:44 KST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.1+10
Operating System: Mac OS X
OS Version: 10.14.3
Default Encoding: US-ASCII
Language: ko
Country: KR
--></g></svg></p>
      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>